# Ğ”Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ¼ Ğ² MuJoCo

## ğŸ” Ğ¦ĞµĞ»ÑŒ
**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ¸ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ swing-up (Ğ¿Ğ¾Ğ´ÑŠÑ‘Ğ¼Ğ° Ğ½Ğ°Ğ²ĞµÑ€Ñ…) Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° Ğ² MuJoCo.** ĞœĞ°ÑÑ‚Ğ½Ğ¸Ğº Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ XML-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸, Ğ¸Ğ· ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ ĞµĞ³Ğ¾ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ - Ğ¼Ğ°ÑÑÑƒ Ğ³Ñ€ÑƒĞ·Ğ° `m` Ğ¸ Ğ´Ğ»Ğ¸Ğ½Ñƒ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° `l`.

Ğ¡Ğ°Ğ¼Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ `simple_pendulum.xml`.

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒ Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ `pendulum_control.py`**. Ğ¢Ğ°Ğ¼ ÑƒĞ¶Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Mujoco Ñ‡ĞµÑ€ĞµĞ· ÑĞ°Ğ¼Ğ¾Ğ¿Ğ¸ÑĞ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ, Ğ²Ğ°Ğ¼ Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑĞºĞ»ÑÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ°.

## ğŸ“Š Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ° Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°
Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‰ĞµĞ³Ğ¾ÑÑ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°:

$$
m l \ddot{\theta} + b \dot{\theta} + m g l \sin\theta = \tau
$$

Ğ“Ğ´Ğµ:
- $\theta$ â€” ÑƒĞ³Ğ¾Ğ» Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° Ğ¾Ñ‚ Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»Ğ¸
- $b$ â€” ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ Ñ‚Ñ€ĞµĞ½Ğ¸Ñ (Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ/Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ Ğ² Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ñ… ÑˆĞ°Ñ€Ğ½Ğ¸Ñ€Ğ° - `damping`)
- $m$ â€” Ğ¼Ğ°ÑÑĞ°
- $g$ â€” ÑƒÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ñ
- $l$ â€” Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¾Ñ‚ Ğ¾ÑĞ¸ Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ Ğ´Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ğ° Ğ¼Ğ°ÑÑ
- $\tau$ â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‰Ğ¸Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚

> **ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°:** Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ `m`, `l` Ğ¸Ğ· XML Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ğ¸Ñ… Ğ² Ñ„Ğ°Ğ¹Ğ» `pendulum_control.py`.

---

## 1. Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¼ĞµĞ½Ñƒ Ğ³Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸ ("Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ñ€Ğ¾Ñ‚ Ğ³Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸")
**Ğ˜Ğ´ĞµÑ:** ĞœĞµĞ½ÑĞµĞ¼ Ğ²ĞµĞºÑ‚Ğ¾Ñ€ Ğ³Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Ñ‚Ğ°ĞºĞ¸Ğ¼ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾Ğ½ "Ñ‚Ğ¾Ğ»ĞºĞ°Ğ»" Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ²Ğ²ĞµÑ€Ñ….

- Ğ—Ğ°Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½ĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğµ Ñ‚Ñ€ĞµĞ½Ğ¸Ğµ Ğ² ÑˆĞ°Ñ€Ğ½Ğ¸Ñ€Ğµ (Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ `damping` Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸).
- Ğ’Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ² Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»Ğµ (`ctrllimited="false"`).
- ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ½Ğ° ÑƒÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ¸ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° Ğ¸ Ğ¿Ğ¾Ğ´ÑƒĞ¼Ğ°Ğ¹Ñ‚Ğµ, ĞºĞ°Ğº Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ "Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ" Ğ²ĞµĞºÑ‚Ğ¾Ñ€ Ğ³Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸.


> **âœ¨ ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°:**
> Ğ§Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ñ Ñ‡Ğ»ĞµĞ½Ğ¾Ğ¼ $ m g l \sin\theta$

---

## 2. Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞŸĞ”-Ñ€ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ¾Ğ¼ (Ğ½ĞµĞ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ Ğ½Ğ° Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»Ğµ)
**Ğ˜Ğ´ĞµÑ:** ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞŸĞ”-Ñ€ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ½ÑÑ‚Ğ¸Ñ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° Ğ² Ğ²ĞµÑ€Ñ…Ğ½ÑÑ Ñ‚Ğ¾Ñ‡ĞºÑƒ:

$$
\tau = K_p (\theta_{des} - \theta) + K_d (\dot{\theta}_{des} - \dot{\theta})
$$

Ğ“Ğ´Ğµ:
- $\theta_{des}$ â€” Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑƒĞ³Ğ¾Ğ» Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° (Ğ²ĞµÑ€Ñ…Ğ½ÑÑ Ñ‚Ğ¾Ñ‡ĞºĞ° - ÑÑ‚Ğ¾ $\pi$)
- $\dot{\theta}_{des}$ â€” Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑƒĞ³Ğ»Ğ¾Ğ²Ğ°Ñ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° (Ñ€Ğ°Ğ· Ğ¼Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ğ¼, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»ÑÑ Ğ² Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‚Ğ¾Ñ‡ĞºĞµ, Ñ‚Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‘Ğ¼ Ğ½ÑƒĞ»Ñ‘Ğ¼)
- $K_p$ Ğ¸ $K_d$ - Ğ¿Ñ€Ğ¾Ğ¿Ğ¾Ñ€Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸ Ğ´Ğ¸Ñ„Ñ„ĞµÑ€ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚Ñ‹ Ñ€ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ° ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾. $K_p$ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚ Ğ·Ğ° Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ, $K_d$ - Ğ·Ğ° ÑƒÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµÑ€ĞµĞ³ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (ÑĞ¾Ğ²ĞµÑ‚ÑƒÑ Ğ¿Ğ¾Ğ³ÑƒĞ³Ğ»Ğ¸Ñ‚ÑŒ, Ñ‚ĞµĞ¼Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ°Ñ)

Ğ ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞ¹Ñ‚Ğµ ĞŸĞ”-Ñ€ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ¸ Ğ¿Ğ¾Ğ´ÑƒĞ¼Ğ°Ğ¹Ñ‚Ğµ, Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ Ñ‚Ğ°ĞºĞ¾Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ¶ĞµĞ»ĞµĞ·Ğµ. Ğ’ ÑÑ‚Ğ¾Ğ¼ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‰ĞµĞ³Ğ¾ Ğ²Ğ¾Ğ·Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ

---

## 3. Energy-shaping Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ (Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ¼)
Ğ’ ÑƒÑĞ»Ğ¾Ğ²Ğ¸ÑÑ… Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ° Ğ½Ğ° Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»Ğµ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ‚Ğ°Ğº, ĞºĞ°Ğº Ğ¼Ñ‹ ÑÑ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ğ»Ğ¸ Ğ±ĞµĞ· Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ² Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°Ñ…. Ğ—Ğ½Ğ°Ñ‡Ğ¸Ñ‚, Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ energy-shaping Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ğ´Ğ»Ñ Ñ€Ğ°ÑĞºĞ°Ñ‡ĞºĞ¸ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ´Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ. Ğ¡ÑƒÑ‚ÑŒ ĞµĞ³Ğ¾ Ğ·Ğ°ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğ² Ğ½Ğ°Ğ±Ğ¾Ñ€Ğµ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸Ğº ÑĞ¼Ğ¾Ğ³ Ğ´Ğ¾ÑÑ‚Ğ¸Ñ‡ÑŒ Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ. Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞµĞ¹ Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸ĞµĞ¹ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ "ÑĞ¾Ğ»Ğ½Ñ‹ÑˆĞºĞ¾", ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ´ĞµĞ»Ğ°Ğ»Ğ¸ Ñ€ĞµĞ±ÑÑ‚Ğ° Ğ½Ğ° ĞºĞ°Ñ‡ĞµĞ»Ğ¸, Ğ¿Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾ Ñ€Ğ°ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ÑÑÑŒ.

Ğ”Ğ»Ñ Ñ€Ğ°ÑĞºĞ°Ñ‡ĞºĞ¸ Ğ²Ğ¾ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ÑÑ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¾Ğ¹:

$$
\tau = k \cdot (E_{des} - E) \cdot \dot{\theta} \cos(\theta)
$$

Ğ“Ğ´Ğµ:
- $E = \frac{1}{2} m l \dot{\theta}^2 - m g l cos\theta$ â€” Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°
- $E_{des}$ â€” Ğ¶ĞµĞ»Ğ°ĞµĞ¼Ğ°Ñ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ Ğ² Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‚Ğ¾Ñ‡ĞºĞµ (Ğ¿Ğ¾Ğ´ÑƒĞ¼Ğ°Ğ¹Ñ‚Ğµ, ĞºĞ°ĞºĞ¾Ğ¹ Ğ¾Ğ½Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ğ² Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‚Ğ¾Ñ‡ĞºĞµ)
- $k$ â€” ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ ÑƒÑĞ¸Ğ»ĞµĞ½Ğ¸Ñ

Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ°ĞºĞ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:
- Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ² Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ĞµĞ»Ğµ (`ctrllimited="true"`)
- ĞŸĞ¾Ğ´ÑƒĞ¼Ğ°Ğ¹Ñ‚Ğµ, ĞºĞ°ĞºĞ¸Ğ¼ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ $E_{des}$
- ĞĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¼ ÑˆĞ°Ğ³Ñƒ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ° $E$ (Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ° Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´ĞµĞ½Ğ° Ğ²Ñ‹ÑˆĞµ)

> **âœ¨ ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°:**
> Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ ÑƒĞ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ½Ğ¸ĞºÑƒĞ´Ğ° Ğ½Ğµ Ñ€Ğ°ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ, Ñ‚Ğ¾ Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ½Ğ° Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñƒ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ° Ğ¸ Ğ²Ğ°ÑˆÑƒ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½ÑƒÑ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ¾Ñ‡ĞµĞ²Ğ¸Ğ´Ğ½Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸ Ğ½ÑƒĞ»ĞµĞ²Ğ¾Ğ¹ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸ Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ğ½Ğµ Ğ½Ğ°Ñ‡Ğ½Ñ‘Ñ‚ Ñ€Ğ°ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ñ‚ÑŒÑÑ)

ĞšĞ¾Ğ³Ğ´Ğ° Ğ²Ñ‹ ÑÑ‚Ğ¾ ÑĞ´ĞµĞ»Ğ°ĞµÑ‚Ğµ, Ğ²Ñ‹ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³Ğ°Ñ Ğ²ĞµÑ€Ñ…Ğ½ĞµĞ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¸, Ğ¼Ğ°ÑÑ‚Ğ½Ğ¸Ğº ĞµÑ‘ Ğ¿ĞµÑ€ĞµĞ»ĞµÑ‚Ğ°ĞµÑ‚, Ğ½Ğµ Ğ² ÑĞ¸Ğ»Ğ°Ñ… Ğ² Ğ½ĞµĞ¹ ÑƒĞ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒÑÑ. Ğ”ĞµĞ»Ğ¾ Ğ² Ñ‚Ğ¾Ğ¼, Ñ‡Ñ‚Ğ¾ energy-shaping Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ½Ğ°ĞºĞ°Ñ‡ĞºĞ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾Ğ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸, Ğ° Ğ´Ğ»Ñ ÑƒĞ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼ ÑƒĞ¶Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´. ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, ĞŸĞ”-Ñ€ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ²Ñ‹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ»Ğ¸ Ğ½Ğ° Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ¼ ÑˆĞ°Ğ³Ğµ.

Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹:
```py
Ğ•ÑĞ»Ğ¸  theta Ğ±Ğ»Ğ¸Ğ·Ğ¾Ğº Ğº ĞŸĞ¸:
        tau = ĞŸĞ”-Ñ€ĞµĞ³ÑƒĞ»ÑÑ‚Ğ¾Ñ€
    Ğ˜Ğ½Ğ°Ñ‡Ğµ:
        tau = energy-shaping
```

**Ğ˜Ğ¼ĞµĞ¹Ñ‚Ğµ Ğ² Ğ²Ğ¸Ğ´Ñƒ, Ñ‡Ñ‚Ğ¾ numpy, ĞºĞ°Ğº Ğ¸ mujoco, Ğ¾Ğ¿ĞµÑ€Ğ¸Ñ€ÑƒÑÑ‚ ÑƒĞ³Ğ»Ğ°Ğ¼Ğ¸ Ğ² Ñ€Ğ°Ğ´Ğ¸Ğ°Ğ½Ğ°Ñ…, Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ ĞµÑĞ»Ğ¸ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑƒĞ³Ğ»Ñ‹ Ğ² Ğ³Ñ€Ğ°Ğ´ÑƒÑĞ°Ñ…, Ğ½Ğµ Ğ·Ğ°Ğ±Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ñ… Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ² Ñ€Ğ°Ğ´Ğ¸Ğ°Ğ½Ñ‹ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ np.grad2rad()**

> **âœ¨ ĞĞ³Ñ€Ğ¾Ğ¼Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ°:**
> 
```py
if (np.deg2rad(180) - theta) <= np.deg2rad(25):
        tau =  Kp * (np.deg2rad(180) - theta) - Kd * dtheta
    else:
        theta = wrap_to_pi(theta)
        E = ...
        tau = ...
tau = np.clip(tau, -5, 5)
```

---

## Ğ§Ñ‚Ğ¾ ÑĞ´Ğ°Ñ‚ÑŒ

- Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ `.py` Ñ„Ğ°Ğ¹Ğ» Ñ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ `pendulum_control_{Ñ„Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ}.py`

---

## Ğ”ĞµĞ´Ğ»Ğ°Ğ¹Ğ½

_04.07.2025 23:59_

---

Ğ£ÑĞ¿ĞµÑ…Ğ¾Ğ²!
